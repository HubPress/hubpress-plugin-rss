"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function rssPlugin(e){e.on("requestGenerateIndex",function(e){console.info("RSS Plugin - requestGenerateIndex"),console.log("requestGenerateIndex",e);var t=e.data.config.site,s=e.data.publishedPosts;if(!s||!s.length)return e;var r=new _rss2.default({title:t.title||"",description:t.description||"",feed_url:t.url+"/rss/",site_url:t.url,image_url:t.cover,ttl:"60"});s.forEach(function(e){r.item({title:e.title,description:e.html,url:""+t.url+e.url,categories:e.tags,author:e.author.name,date:e.published_at})});var n=r.xml(),i=[];i.push({name:"RSS",path:"rss/index.xml",content:n,message:"Publish rss feed"});var u=(e.data.elementsToPublish||[]).concat(i),a=Object.assign({},e.data,{elementsToPublish:u});return Object.assign({},e,{data:a})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rssPlugin=rssPlugin;var _rss=require("rss"),_rss2=_interopRequireDefault(_rss);